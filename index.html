<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Adam Skarre</title>

  <link rel="stylesheet" href="style.css" />

  <style>
    /* --- THEME VARIABLES --- */
    :root {
      --bg: #ffffff;
      --text: #111111;
      --muted: #555;
      --card: #f4f4f5;
      --border: #e5e7eb;

      /* accents for toggle */
      --sun: #f6c445;
      --moon: #cbd5e1;
    }

    [data-theme="dark"] {
      --bg: #0f1115;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --card: #1c1f26;
      --border: #2a2f3a;

      --sun: #f6c445;
      --moon: #cbd5e1;
    }

    body {
      background: var(--bg);
      color: var(--text);
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    a { color: inherit; text-decoration: none; }

    /* --- NAV --- */
    header {
      position: sticky;
      top: 0;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      z-index: 100;
    }

    .nav {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-left {
      font-weight: 600;
      font-size: 1.1rem;
    }

    .nav-right {
      display: flex;
      gap: 1.5rem;
      align-items: center;
    }

    /* --- THEME SWITCH (smooth sun/moon) --- */
    .theme-switch {
      --w: 54px;
      --h: 30px;
      --pad: 3px;

      width: var(--w);
      height: var(--h);
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--card);
      display: inline-flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--pad);
      cursor: pointer;
      position: relative;
    }

    .theme-switch:focus { outline: none; }
    .theme-switch:focus-visible { box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.25); }

    .theme-switch .thumb {
      position: absolute;
      top: var(--pad);
      left: var(--pad);
      width: calc(var(--h) - (var(--pad) * 2));
      height: calc(var(--h) - (var(--pad) * 2));
      border-radius: 999px;
      background: var(--bg);
      border: 1px solid var(--border);
      transition: transform 180ms ease;
    }

    [data-theme="dark"] .theme-switch .thumb {
      transform: translateX(calc(var(--w) - var(--h)));
    }

    .theme-switch svg {
      width: 16px;
      height: 16px;
      z-index: 1;
      opacity: 0.9;
      transition: opacity 180ms ease;
    }

    .theme-switch .sun { color: var(--sun); }
    .theme-switch .moon { color: var(--moon); }

    [data-theme="dark"] .theme-switch .sun { opacity: 0.55; }
    [data-theme="light"] .theme-switch .moon { opacity: 0.55; }

    /* --- MAIN LAYOUT --- */
    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 4rem 1rem;
      display: grid;
      gap: 3rem;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 2rem;
    }

    /* --- HERO --- */
    .hero h1 {
      margin: 0 0 0.75rem 0;
      font-size: 2.4rem;
    }

    .hero p {
      max-width: 650px;
      color: var(--muted);
      line-height: 1.6;
    }

    .hero a {
      display: inline-block;
      margin-top: 1.25rem;
      font-weight: 500;
      border-bottom: 1px solid var(--text);
    }

    /* --- ABOUT BLOCK --- */
    .about ul {
      margin: 1rem 0 0 0;
      padding-left: 1.2rem;
    }

    .about li {
      margin-bottom: 0.6rem;
      color: var(--muted);
    }

    /* --- CAPABILITIES --- */
    .cap-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .cap {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.25rem;
      background: var(--bg);
      transition: transform 0.15s ease;
    }

    .cap:hover { transform: translateY(-2px); }

    .cap h4 { margin: 0 0 0.4rem 0; }
    .cap p { margin: 0; font-size: 0.9rem; color: var(--muted); }

    /* --- WEATHER BLOCK (card) --- */
    .weather-head {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .weather-title { margin: 0; font-size: 1.15rem; }
    .weather-sub { color: var(--muted); font-size: 0.95rem; margin: 0.35rem 0 0 0; }

    .weather-actions {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .btn {
      padding: 0.55rem 0.9rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--bg);
      cursor: pointer;
      font-weight: 500;
    }

    .btn:disabled { opacity: 0.6; cursor: not-allowed; }

    .weather-summary {
      margin-top: 0.5rem;
      color: var(--muted);
      line-height: 1.55;
    }

    .forecast {
      margin-top: 1.25rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 0.75rem;
    }

    .day {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.85rem;
      text-align: center;
    }

    .day .d { font-weight: 600; font-size: 0.9rem; }
    .day .w { margin-top: 0.35rem; color: var(--muted); font-size: 0.9rem; }
    .day .t { margin-top: 0.35rem; font-weight: 600; }

    .weather-error {
      margin-top: 0.75rem;
      color: var(--muted);
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <header>
    <div class="nav">
      <div class="nav-left">
        <a href="index.html">Adam Skarre</a>
      </div>
      <nav class="nav-right">
        <a href="projects.html">Projects</a>
        <a href="blog.html">Blog</a>
        <a href="contact.html">Contact</a>

        <button class="theme-switch" id="themeToggle" type="button" aria-label="Toggle theme">
          <span class="thumb" aria-hidden="true"></span>

          <!-- Sun -->
          <svg class="sun" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" stroke="currentColor" stroke-width="2"/>
            <path d="M12 2v2M12 20v2M4 12H2M22 12h-2M5 5l1.4 1.4M17.6 17.6 19 19M19 5l-1.4 1.4M6.4 17.6 5 19"
              stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>

          <!-- Moon -->
          <svg class="moon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 14.5A8.5 8.5 0 0 1 9.5 3 7 7 0 1 0 21 14.5Z"
              stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          </svg>
        </button>
      </nav>
    </div>
  </header>

  <!-- MAIN -->
  <main>
    <!-- HERO -->
    <section class="card hero">
      <h1>Welcome</h1>
      <p>
        I’m a mechanical engineering student working at the intersection of
        physical systems, quantitative modeling, and real-world constraints.
        My work emphasizes simulation, trade-off analysis, and first-principles
        thinking.
      </p>
      <a href="projects.html">View projects →</a>
    </section>

    <!-- ABOUT -->
    <section class="card about">
      <h2>About</h2>
      <ul>
        <li>Mechanical Engineering background with design and manufacturing focus</li>
        <li>Experience with modeling, simulation, and experimental reasoning</li>
        <li>Quantitative systems spanning signals, optimization, and analysis</li>
        <li>Comfort working across engineering, business, and technical communication</li>
      </ul>

      <div class="cap-grid">
        <a class="cap" href="cad-projects.html">
          <h4>Design</h4>
          <p>CAD, system layout, constraints</p>
        </a>
        <a class="cap" href="Manufacturing-projects.html">
          <h4>Manufacturing</h4>
          <p>DFM, process context</p>
        </a>
        <a class="cap" href="Laboratory.html">
          <h4>Laboratory</h4>
          <p>Testing, instrumentation</p>
        </a>
        <a class="cap" href="ai-modeling-projects.html">
          <h4>Quant Modeling</h4>
          <p>Simulation, signals, optimization</p>
        </a>
        <a class="cap" href="consulting-projects.html">
          <h4>Consulting</h4>
          <p>Analysis, strategy, execution</p>
        </a>
      </div>
    </section>

    <!-- WEATHER (third block as a card) -->
    <section class="card" aria-label="Local weather">
      <div class="weather-head">
        <div>
          <h3 class="weather-title" id="weatherTitle">Local weather this week</h3>
          <p class="weather-sub" id="weatherSubtitle">Uses browser location · Fahrenheit</p>
        </div>

        <div class="weather-actions">
          <button class="btn" id="weatherBtn" type="button">Check weather</button>
        </div>
      </div>

      <div class="weather-summary" id="weatherSummary"> </div>
      <div class="forecast" id="forecast" hidden></div>
      <div class="weather-error" id="weatherError" hidden></div>
    </section>
  </main>

  <!-- SCRIPTS -->
  <script>
    // -------------------------
    // Theme toggle (smooth switch)
    // -------------------------
    const html = document.documentElement;
    const toggle = document.getElementById("themeToggle");

    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark" || savedTheme === "light") {
      html.setAttribute("data-theme", savedTheme);
    }

    toggle.addEventListener("click", () => {
      const next = html.getAttribute("data-theme") === "dark" ? "light" : "dark";
      html.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    });

    // -------------------------
    // Weather (Open-Meteo, 7-day, Fahrenheit)
    // - current: current_weather
    // - daily: max/min + weathercode
    // -------------------------
    const weatherBtn = document.getElementById("weatherBtn");
    const weatherTitle = document.getElementById("weatherTitle");
    const weatherSubtitle = document.getElementById("weatherSubtitle");
    const weatherSummary = document.getElementById("weatherSummary");
    const forecastEl = document.getElementById("forecast");
    const weatherError = document.getElementById("weatherError");

    const codeToLabel = (code) => {
      // Open-Meteo weather codes (condensed, readable)
      // https://open-meteo.com/en/docs
      const map = new Map([
        [0, "Clear"],
        [1, "Mostly clear"], [2, "Partly cloudy"], [3, "Overcast"],
        [45, "Fog"], [48, "Rime fog"],
        [51, "Light drizzle"], [53, "Drizzle"], [55, "Heavy drizzle"],
        [56, "Freezing drizzle"], [57, "Freezing drizzle"],
        [61, "Light rain"], [63, "Rain"], [65, "Heavy rain"],
        [66, "Freezing rain"], [67, "Freezing rain"],
        [71, "Light snow"], [73, "Snow"], [75, "Heavy snow"],
        [77, "Snow grains"],
        [80, "Rain showers"], [81, "Rain showers"], [82, "Violent showers"],
        [85, "Snow showers"], [86, "Snow showers"],
        [95, "Thunderstorm"],
        [96, "Thunderstorm + hail"], [99, "Thunderstorm + hail"],
      ]);
      return map.get(code) || "Weather";
    };

    const fmtDay = (iso) => {
      const d = new Date(iso + "T00:00:00");
      return d.toLocaleDateString(undefined, { weekday: "short", month: "short", day: "numeric" });
    };

    async function reverseGeocode(lat, lon) {
      try {
        const url = `https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&count=1&language=en&format=json`;
        const res = await fetch(url);
        if (!res.ok) return null;
        const data = await res.json();
        const r = data && data.results && data.results[0];
        if (!r) return null;
        // prefer (name, admin1) style
        return [r.name, r.admin1].filter(Boolean).join(", ");
      } catch {
        return null;
      }
    }

    function setError(msg) {
      weatherError.hidden = false;
      weatherError.textContent = msg;
    }

    function clearError() {
      weatherError.hidden = true;
      weatherError.textContent = "";
    }

    weatherBtn.addEventListener("click", async () => {
      clearError();
      weatherBtn.disabled = true;
      weatherBtn.textContent = "Loading...";

      try {
        if (!navigator.geolocation) {
          setError("Location not available in this browser.");
          return;
        }

        const pos = await new Promise((resolve, reject) => {
          navigator.geolocation.getCurrentPosition(resolve, reject, {
            enableHighAccuracy: false,
            timeout: 10000,
            maximumAge: 5 * 60 * 1000,
          });
        });

        const { latitude, longitude } = pos.coords;

        const place = await reverseGeocode(latitude, longitude);
        if (place) weatherTitle.textContent = `${place} weather this week`;

        const url =
          `https://api.open-meteo.com/v1/forecast` +
          `?latitude=${latitude}&longitude=${longitude}` +
          `&temperature_unit=fahrenheit&windspeed_unit=mph&timezone=auto` +
          `&current_weather=true` +
          `&daily=weathercode,temperature_2m_max,temperature_2m_min`;

        const res = await fetch(url);
        if (!res.ok) throw new Error("Weather request failed.");

        const data = await res.json();

        const cw = data.current_weather;
        const daily = data.daily;

        const nowLabel = cw ? `${Math.round(cw.temperature)}°F · Wind ${Math.round(cw.windspeed)} mph · ${codeToLabel(daily.weathercode[0])}` : "";
        weatherSummary.textContent = nowLabel;

        // build 7-day tiles
        forecastEl.innerHTML = "";
        const n = Math.min(7, daily.time.length);

        for (let i = 0; i < n; i++) {
          const tile = document.createElement("div");
          tile.className = "day";

          const d = document.createElement("div");
          d.className = "d";
          d.textContent = fmtDay(daily.time[i]);

          const w = document.createElement("div");
          w.className = "w";
          w.textContent = codeToLabel(daily.weathercode[i]);

          const t = document.createElement("div");
          t.className = "t";
          t.textContent = `${Math.round(daily.temperature_2m_max[i])}° / ${Math.round(daily.temperature_2m_min[i])}°`;

          tile.appendChild(d);
          tile.appendChild(w);
          tile.appendChild(t);
          forecastEl.appendChild(tile);
        }

        forecastEl.hidden = false;
        weatherSubtitle.textContent = "Uses browser location · Fahrenheit";
      } catch (e) {
        setError("Location permission denied or weather unavailable.");
      } finally {
        weatherBtn.disabled = false;
        weatherBtn.textContent = "Check weather";
      }
    });
  </script>
</body>
</html>
