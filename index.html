<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Adam Skarre</title>

  <link rel="stylesheet" href="style.css" />

  <style>
    /* --- THEME VARIABLES --- */
    :root {
      --bg: #ffffff;
      --text: #111111;
      --muted: #555;
      --card: #f4f4f5;
      --border: #e5e7eb;
      --shadow: 0 10px 30px rgba(0,0,0,0.08);

      /* weather */
      --wx-bg: linear-gradient(180deg, #dbeafe 0%, #c7d2fe 100%);
      --wx-card: rgba(255,255,255,0.55);
      --wx-text: #0b1220;
      --wx-muted: rgba(11,18,32,0.7);
      --wx-border: rgba(11,18,32,0.12);
      --wx-chip: rgba(255,255,255,0.7);
      --wx-btn: #1d4ed8;
      --wx-btn-text: #ffffff;

      /* toggle */
      --toggle-bg: #e5e7eb;
      --toggle-knob: #ffffff;
      --sun: #f59e0b;
      --moon: #6b7280;
    }

    [data-theme="dark"] {
      --bg: #0f1115;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --card: #1c1f26;
      --border: #2a2f3a;
      --shadow: 0 10px 30px rgba(0,0,0,0.45);

      /* weather */
      --wx-bg: linear-gradient(180deg, #1e3a8a 0%, #0b1020 100%);
      --wx-card: rgba(15,17,21,0.45);
      --wx-text: #eef2ff;
      --wx-muted: rgba(238,242,255,0.75);
      --wx-border: rgba(238,242,255,0.14);
      --wx-chip: rgba(15,17,21,0.55);
      --wx-btn: #60a5fa;
      --wx-btn-text: #07101f;

      /* toggle */
      --toggle-bg: #2a2f3a;
      --toggle-knob: #0f1115;
      --sun: #fbbf24;
      --moon: #cbd5e1;
    }

    body {
      background: var(--bg);
      color: var(--text);
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    a { color: inherit; text-decoration: none; }

    /* --- NAV --- */
    header {
      position: sticky;
      top: 0;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      z-index: 100;
    }

    .nav {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .nav-left { font-weight: 600; font-size: 1.1rem; }

    .nav-right {
      display: flex;
      gap: 1.25rem;
      align-items: center;
    }

    /* --- THEME TOGGLE (smooth pill like Ana√Øs) --- */
    .theme-toggle {
      width: 54px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--toggle-bg);
      position: relative;
      cursor: pointer;
      padding: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.02);
    }

    .theme-toggle:focus { outline: none; }
    .theme-toggle:focus-visible { box-shadow: 0 0 0 3px rgba(59,130,246,0.35); }

    .theme-toggle .knob {
      position: absolute;
      top: 3px;
      left: 3px;
      width: 24px;
      height: 24px;
      border-radius: 999px;
      background: var(--toggle-knob);
      box-shadow: 0 6px 16px rgba(0,0,0,0.18);
      transition: transform 220ms ease;
      display: grid;
      place-items: center;
    }

    [data-theme="dark"] .theme-toggle .knob {
      transform: translateX(24px);
    }

    .icon-sun, .icon-moon {
      position: absolute;
      width: 16px;
      height: 16px;
      display: grid;
      place-items: center;
      transition: opacity 200ms ease;
      pointer-events: none;
    }
    .icon-sun { left: 7px; color: var(--sun); opacity: 1; }
    .icon-moon { right: 7px; color: var(--moon); opacity: 1; }

    /* little emphasis: active side slightly brighter */
    [data-theme="dark"] .icon-sun { opacity: 0.55; }
    [data-theme="light"] .icon-moon { opacity: 0.55; }

    /* --- MAIN LAYOUT --- */
    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 4rem 1rem;
      display: grid;
      gap: 3rem;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 2rem;
    }

    /* --- HERO --- */
    .hero h1 {
      margin: 0 0 0.75rem 0;
      font-size: 2.4rem;
    }

    .hero p {
      max-width: 650px;
      color: var(--muted);
      line-height: 1.6;
      margin: 0;
    }

    .hero a {
      display: inline-block;
      margin-top: 1.25rem;
      font-weight: 500;
      border-bottom: 1px solid var(--text);
    }

    /* --- ABOUT BLOCK --- */
    .about ul {
      margin: 1rem 0 0 0;
      padding-left: 1.2rem;
    }

    .about li {
      margin-bottom: 0.6rem;
      color: var(--muted);
    }

    /* --- CAPABILITIES --- */
    .cap-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .cap {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.25rem;
      background: var(--bg);
      transition: transform 0.15s ease;
    }

    .cap:hover { transform: translateY(-2px); }
    .cap h4 { margin: 0 0 0.4rem 0; }
    .cap p { margin: 0; font-size: 0.9rem; color: var(--muted); }

    /* --- WEATHER BLOCK (blue app-style) --- */
    .weather-card {
      background: var(--wx-bg);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 16px;
      padding: 1.25rem 1.25rem 1.1rem 1.25rem;
      box-shadow: var(--shadow);
      color: var(--wx-text);
      overflow: hidden;
    }

    .weather-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 0.9rem;
    }

    .weather-title {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .weather-title h3 {
      margin: 0;
      font-size: 1.05rem;
      letter-spacing: 0.2px;
      color: var(--wx-text);
    }

    .weather-sub {
      font-size: 0.92rem;
      color: var(--wx-muted);
    }

    .weather-actions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .wx-btn {
      border: 0;
      border-radius: 10px;
      padding: 0.55rem 0.9rem;
      background: var(--wx-btn);
      color: var(--wx-btn-text);
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(0,0,0,0.12);
      transition: transform 120ms ease, opacity 120ms ease;
      white-space: nowrap;
    }
    .wx-btn:hover { transform: translateY(-1px); }
    .wx-btn:disabled { opacity: 0.65; cursor: not-allowed; transform: none; }

    .wx-main {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 1rem;
      align-items: stretch;
      margin-bottom: 0.9rem;
    }

    @media (max-width: 820px) {
      .wx-main { grid-template-columns: 1fr; }
      .weather-actions { justify-content: flex-end; }
    }

    .wx-now {
      background: var(--wx-card);
      border: 1px solid var(--wx-border);
      border-radius: 14px;
      padding: 1rem;
      backdrop-filter: blur(10px);
    }

    .wx-now-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .wx-temp {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .wx-temp .big {
      font-size: 2rem;
      font-weight: 800;
      line-height: 1;
      letter-spacing: -0.5px;
    }

    .wx-temp .feels {
      color: var(--wx-muted);
      font-size: 0.92rem;
    }

    .wx-cond {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 0.2rem;
      text-align: right;
    }

    .wx-cond .desc {
      font-weight: 700;
    }

    .wx-cond .meta {
      color: var(--wx-muted);
      font-size: 0.92rem;
    }

    .wx-forecast {
      background: var(--wx-card);
      border: 1px solid var(--wx-border);
      border-radius: 14px;
      padding: 1rem;
      backdrop-filter: blur(10px);
    }

    .wx-forecast h4 {
      margin: 0 0 0.75rem 0;
      font-size: 0.95rem;
      letter-spacing: 0.2px;
      color: var(--wx-text);
      opacity: 0.92;
    }

    .wx-days {
      display: grid;
      grid-template-columns: repeat(7, minmax(92px, 1fr));
      gap: 0.55rem;
      overflow-x: auto;
      padding-bottom: 0.25rem;
    }

    .wx-day {
      background: var(--wx-chip);
      border: 1px solid var(--wx-border);
      border-radius: 12px;
      padding: 0.7rem 0.65rem;
      display: grid;
      gap: 0.35rem;
      min-width: 92px;
    }

    .wx-day .dow {
      font-weight: 800;
      font-size: 0.82rem;
      letter-spacing: 0.2px;
      opacity: 0.9;
    }

    .wx-day .icon {
      font-size: 1.05rem;
      line-height: 1;
    }

    .wx-day .hi {
      font-weight: 800;
      font-size: 0.95rem;
    }

    .wx-day .lo {
      color: var(--wx-muted);
      font-size: 0.86rem;
      margin-top: -0.25rem;
    }

    .wx-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-top: 0.85rem;
      color: var(--wx-muted);
      font-size: 0.9rem;
    }

    .wx-link {
      color: var(--wx-text);
      opacity: 0.92;
      border-bottom: 1px solid rgba(255,255,255,0.0);
    }
    .wx-link:hover { border-bottom-color: rgba(255,255,255,0.35); }

    .wx-error {
      margin-top: 0.75rem;
      color: var(--wx-text);
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 12px;
      padding: 0.75rem 0.9rem;
      display: none;
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <header>
    <div class="nav">
      <div class="nav-left">
        <a href="index.html">Adam Skarre</a>
      </div>
      <nav class="nav-right">
        <a href="projects.html">Projects</a>
        <a href="blog.html">Blog</a>
        <a href="contact.html">Contact</a>

        <button class="theme-toggle" id="themeToggle" type="button" aria-label="Toggle theme">
          <!-- inline icons -->
          <span class="icon-sun" aria-hidden="true">
            <!-- sun -->
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" stroke="currentColor" stroke-width="2"/>
              <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="icon-moon" aria-hidden="true">
            <!-- moon -->
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M21 13.2A7.8 7.8 0 0 1 10.8 3a6.9 6.9 0 1 0 10.2 10.2Z"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="knob" aria-hidden="true"></span>
        </button>
      </nav>
    </div>
  </header>

  <!-- MAIN -->
  <main>
    <!-- HERO -->
    <section class="card hero">
      <h1>Welcome</h1>
      <p>
        I‚Äôm a mechanical engineering student working at the intersection of
        physical systems, quantitative modeling, and real-world constraints.
        My work emphasizes simulation, trade-off analysis, and first-principles
        thinking.
      </p>
      <a href="projects.html">View projects ‚Üí</a>
    </section>

    <!-- ABOUT -->
    <section class="card about">
      <h2>About</h2>
      <ul>
        <li>Mechanical Engineering background with design and manufacturing focus</li>
        <li>Experience with modeling, simulation, and experimental reasoning</li>
        <li>Quantitative systems spanning signals, optimization, and analysis</li>
        <li>Comfort working across engineering, business, and technical communication</li>
      </ul>

      <div class="cap-grid">
        <a class="cap" href="cad-projects.html">
          <h4>Design</h4>
          <p>CAD, system layout, constraints</p>
        </a>
        <a class="cap" href="Manufacturing-projects.html">
          <h4>Manufacturing</h4>
          <p>DFM, process context</p>
        </a>
        <a class="cap" href="Laboratory.html">
          <h4>Laboratory</h4>
          <p>Testing, instrumentation</p>
        </a>
        <a class="cap" href="ai-modeling-projects.html">
          <h4>Quant Modeling</h4>
          <p>Simulation, signals, optimization</p>
        </a>
        <a class="cap" href="consulting-projects.html">
          <h4>Consulting</h4>
          <p>Analysis, strategy, execution</p>
        </a>
      </div>
    </section>

    <!-- WEATHER (third block) -->
    <section class="weather-card" aria-label="Local weather this week">
      <div class="weather-top">
        <div class="weather-title">
          <h3 id="wxHeading">Local weather this week</h3>
          <div class="weather-sub" id="wxSub">Uses browser location ¬∑ Fahrenheit</div>
        </div>
        <div class="weather-actions">
          <button class="wx-btn" id="wxBtn" type="button">Check weather</button>
        </div>
      </div>

      <div class="wx-main" id="wxMain" style="display:none;">
        <div class="wx-now">
          <div class="wx-now-row">
            <div class="wx-temp">
              <div class="big" id="wxTemp">--¬∞F</div>
              <div class="feels" id="wxFeels">Feels like --¬∞F</div>
            </div>
            <div class="wx-cond">
              <div class="desc" id="wxDesc">--</div>
              <div class="meta" id="wxMeta">Wind -- mph ¬∑ --</div>
            </div>
          </div>
        </div>

        <div class="wx-forecast">
          <h4>7-Day Forecast</h4>
          <div class="wx-days" id="wxDays"></div>
        </div>
      </div>

      <div class="wx-footer" id="wxFooter" style="display:none;">
        <a class="wx-link" id="wxMore" href="#" target="_blank" rel="noreferrer">View detailed forecast ‚Üí</a>
        <span id="wxCredit">Powered by Open-Meteo</span>
      </div>

      <div class="wx-error" id="wxError"></div>
    </section>
  </main>

  <!-- SCRIPTS -->
  <script>
    /* ---------------- THEME TOGGLE ---------------- */
    const html = document.documentElement;
    const toggle = document.getElementById("themeToggle");

    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark" || savedTheme === "light") {
      html.setAttribute("data-theme", savedTheme);
    }

    toggle.addEventListener("click", () => {
      const next = html.getAttribute("data-theme") === "dark" ? "light" : "dark";
      html.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    });

    /* ---------------- WEATHER (Open-Meteo + reverse geocode) ---------------- */
    const wxBtn = document.getElementById("wxBtn");
    const wxHeading = document.getElementById("wxHeading");
    const wxSub = document.getElementById("wxSub");
    const wxMain = document.getElementById("wxMain");
    const wxFooter = document.getElementById("wxFooter");
    const wxDays = document.getElementById("wxDays");
    const wxError = document.getElementById("wxError");

    const wxTemp = document.getElementById("wxTemp");
    const wxFeels = document.getElementById("wxFeels");
    const wxDesc = document.getElementById("wxDesc");
    const wxMeta = document.getElementById("wxMeta");
    const wxMore = document.getElementById("wxMore");

    const WMO = {
      0: { t: "Clear", i: "‚òÄÔ∏è" },
      1: { t: "Mostly clear", i: "üå§Ô∏è" },
      2: { t: "Partly cloudy", i: "‚õÖ" },
      3: { t: "Cloudy", i: "‚òÅÔ∏è" },
      45:{ t: "Fog", i: "üå´Ô∏è" },
      48:{ t: "Rime fog", i: "üå´Ô∏è" },
      51:{ t: "Light drizzle", i: "üå¶Ô∏è" },
      53:{ t: "Drizzle", i: "üå¶Ô∏è" },
      55:{ t: "Heavy drizzle", i: "üåßÔ∏è" },
      61:{ t: "Light rain", i: "üåßÔ∏è" },
      63:{ t: "Rain", i: "üåßÔ∏è" },
      65:{ t: "Heavy rain", i: "üåßÔ∏è" },
      71:{ t: "Light snow", i: "üå®Ô∏è" },
      73:{ t: "Snow", i: "üå®Ô∏è" },
      75:{ t: "Heavy snow", i: "üå®Ô∏è" },
      80:{ t: "Rain showers", i: "üå¶Ô∏è" },
      81:{ t: "Showers", i: "üå¶Ô∏è" },
      82:{ t: "Heavy showers", i: "‚õàÔ∏è" },
      95:{ t: "Thunderstorm", i: "‚õàÔ∏è" },
      96:{ t: "Thunderstorm + hail", i: "‚õàÔ∏è" },
      99:{ t: "Thunderstorm + hail", i: "‚õàÔ∏è" }
    };

    const fmtDay = (isoDate) => {
      const d = new Date(isoDate + "T00:00:00");
      return d.toLocaleDateString(undefined, { weekday: "short" });
    };

    const f = (c) => Math.round((c * 9/5) + 32);
    const mph = (kph) => Math.round(kph * 0.621371);

    function showError(msg) {
      wxError.style.display = "block";
      wxError.textContent = msg;
    }

    async function reverseGeocode(lat, lon) {
      // Open-Meteo geocoding (no key) for a clean city/state label
      const url = `https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&language=en&count=1`;
      const res = await fetch(url);
      if (!res.ok) return null;
      const data = await res.json();
      if (!data || !data.results || !data.results.length) return null;
      const r = data.results[0];
      const parts = [r.name, r.admin1, r.country_code].filter(Boolean);
      return parts.join(", ");
    }

    async function fetchWeather(lat, lon) {
      const url =
        `https://api.open-meteo.com/v1/forecast` +
        `?latitude=${lat}&longitude=${lon}` +
        `&current_weather=true` +
        `&daily=weathercode,temperature_2m_max,temperature_2m_min` +
        `&temperature_unit=celsius&windspeed_unit=kmh&timezone=auto`;
      const res = await fetch(url);
      if (!res.ok) throw new Error("Weather fetch failed");
      return await res.json();
    }

    wxBtn.addEventListener("click", async () => {
      wxError.style.display = "none";
      wxBtn.disabled = true;
      wxBtn.textContent = "Loading‚Ä¶";

      try {
        if (!navigator.geolocation) throw new Error("Geolocation not available");

        navigator.geolocation.getCurrentPosition(async (pos) => {
          try {
            const { latitude, longitude } = pos.coords;

            const place = await reverseGeocode(latitude, longitude);
            if (place) wxHeading.textContent = `${place} weather this week`;

            const data = await fetchWeather(latitude, longitude);

            const cw = data.current_weather;
            const code = cw.weathercode;
            const map = WMO[code] || { t: "Weather", i: "üå°Ô∏è" };

            wxTemp.textContent = `${f(cw.temperature)}¬∞F`;
            wxFeels.textContent = `Feels like ${f(cw.temperature)}¬∞F`;
            wxDesc.textContent = `${map.i} ${map.t}`;
            wxMeta.textContent = `Wind ${mph(cw.windspeed)} mph ¬∑ Updated ${new Date(cw.time).toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"})}`;

            // build 7-day
            wxDays.innerHTML = "";
            const times = data.daily.time;
            const tmax = data.daily.temperature_2m_max;
            const tmin = data.daily.temperature_2m_min;
            const wcd  = data.daily.weathercode;

            for (let i = 0; i < Math.min(7, times.length); i++) {
              const di = WMO[wcd[i]] || { t: "Weather", i: "üå°Ô∏è" };
              const el = document.createElement("div");
              el.className = "wx-day";
              el.innerHTML = `
                <div class="dow">${fmtDay(times[i])}</div>
                <div class="icon" title="${di.t}">${di.i}</div>
                <div class="hi">${f(tmax[i])}¬∞</div>
                <div class="lo">${f(tmin[i])}¬∞</div>
              `;
              wxDays.appendChild(el);
            }

            // ‚ÄúView detailed forecast‚Äù -> NWS point forecast (no API key, reliable)
            wxMore.href = `https://forecast.weather.gov/MapClick.php?lat=${latitude}&lon=${longitude}`;

            wxMain.style.display = "grid";
            wxFooter.style.display = "flex";

            wxBtn.disabled = false;
            wxBtn.textContent = "Refresh";
          } catch (err) {
            wxBtn.disabled = false;
            wxBtn.textContent = "Check weather";
            showError("Weather failed to load. Allow location access, then retry.");
          }
        }, () => {
          wxBtn.disabled = false;
          wxBtn.textContent = "Check weather";
          showError("Location permission blocked. Enable it in the browser and retry.");
        }, { enableHighAccuracy: false, timeout: 8000, maximumAge: 300000 });

      } catch (e) {
        wxBtn.disabled = false;
        wxBtn.textContent = "Check weather";
        showError("Weather unavailable in this browser.");
      }
    });
  </script>
</body>
</html>
